<!DOCTYPE html>
<html>
  <head>
    <title>Australian Tax Calculator</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- Custom fonts for this template -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="css/paycalc.css" rel="stylesheet">
  </head>

<body>

<nav class="navbar navbar-toggleable-md bg-green">
  
  Tax Calculator

</nav>

<div class="container bg-lightgreen">
  <h2>Tax Calculator</h2>

<form>
  <div class="row">
    <div class="col-sm-3">
      <div class="form-group">
        <label for="orginal_income">Income: </label> 
        <input type="text" id="orginal_income" value="100000" class="form-control"> 
      </div>
    </div>
    <div class="col-sm-3">
      <div class="form-group">
        <label for="debt">Debt: </label> 
        <input type="text" id="debt" value="300000" class="form-control">
      </div>
    </div>
    <div class="col-sm-3">
      <div class="form-group">
        <label for="monthly_rent">Monthly Rent: </label>
        <input type="text" id="monthly_rent" value="1000" class="form-control">
      </div>
    </div>
    <div class="col-sm-3">
      <div class="form-group">
        <label for="hobbies">Hobby Memberships </label>
        <input type="text" id="hobbies" class="form-control" value="500">
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-3">
      <div class="form-group">
        <label for="interest_rate">Deductable Interest Rate: </label>
        <input type="text" id="interest_rate" value="5" class="form-control">
      </div>
    </div>
    <div class="col-sm-3">
      <div class="form-group">
        <label for="insurances"> Insurances and Rego: </label>
        <input type="text" id="insurances" value="2500" class="form-control" placeholder="Car/health/property" >
      </div>
    </div>
    <div class="col-sm-3">
      <div class="form-group">
        <label for="telephone"> Phone Bill Monthly: </label>
        <input type="text" id="telephone" value="50" class="form-control">
      </div>
    </div>
  </div>
</form>
 
  <button class="btn-primary btn btn-primary mt-25px" onclick="updateTax()">Crunch the numbers</button>

<div class="col-sm-5">
<table class="table">
  <tr> 
    <td>Salary</td><td id="income"></td>
  </tr>
  <tr> 
    <td>Tax</td><td id="tax"></td>
  </tr>
  <tr> 
    <td>Taxible Income</td><td id="taxible_income"></td>
  </tr>
  <tr> 
    <td>Medicare</td><td id="medicare_levy"></td>
  </tr>
</table>
</div>
<hr>
<table class="table">
  <th>
    <td>Before Rent</td><td>After Expenses</td>
  </th>
  <tr> 
    <td>Gross Income</td><td id="gross_income"></td><td id="post_expenses"></td>
  </tr>
  <tr> 
    <td>Monthly Gross Income</td><td id="monthly_gross_income"></td><td id="post_exp_monthly"></td>
  </tr>
  <tr> 
    <td>Weekly Gross Income</td><td id="weekly_gross_income"></td><td id="post_exp_weekly"></td>
  </tr>
  <tr> 
    <td>Daily Gross Income</td><td id="daily_gross_income"></td><td id="post_exp_daily"></td>
  </tr>

  </table>

</div>


</body>
</html>

<script>

  function calcInterest(interest_rate, debt) {
    interest_rate * debt;
  }

  function updateTax () {
    var income = $("#orginal_income").val();

    console.log(income)

    //document.getElementById("income").innerHTML = income;
    $("#income").text(income);

    var interest_rate = $("#interest_rate").val();
    var debt = $("#debt").val();
    console.log(interest_rate)
    var yearly_rent = $("#monthly_rent").val() * 12;
    var interest = interest_rate/100 * debt;
    console.log(interest)
    var taxible_income = income - interest;
    var tax = calcTax(taxible_income);
    
    $("#taxible_income").text(taxible_income);
    $("#tax").text(tax);
    var medicare_levy = 0.02 * taxible_income;
    var gross_income = taxible_income - tax - medicare_levy;
    $("#gross_income").text(gross_income.toFixed(2));
    $("#medicare_levy").text(medicare_levy.toFixed(2));
    $("#monthly_gross_income").text(monthly(gross_income));
    $("#weekly_gross_income").text(weekly(gross_income));
    $("#daily_gross_income").text(daily(gross_income));
    

    console.log(get_yearly_expenses())
  
    post_expenses_income = gross_income - get_yearly_expenses();
    $("#post_expenses").text(post_expenses_income.toFixed(2));
    $("#medicare_levy").text(medicare_levy.toFixed(2));
    $("#post_exp_monthly").text(monthly(post_expenses_income));
    $("#post_exp_weekly").text(weekly(post_expenses_income));
    $("#post_exp_daily").text(daily(post_expenses_income));
    
  }

  function monthly(yearly) {
    return (yearly/12).toFixed(2)
  }
  function weekly(yearly) {
    return (yearly/365*7).toFixed(2)
  }
  function daily(yearly) {
    return (yearly/365).toFixed(2)
  }

 function get_yearly_expenses() {
    return (
      eval($("#monthly_rent").val() * 12) 
      + eval($("#insurances").val()) 
      + eval($("#telephone").val() * 12) 
      + eval($("#hobbies").val())
    ) 
 }

  function calcTax(income) {
    if (income < 18001) {
      return 0
    }
    if (income < 37001) {
      return 0.19 * (income - 18000)
    }
    if (income < 87001) {
      return 3572 + (0.325 * (income - 37000))
    }
    if (income < 180001) {
      return 19822 + (0.37 * (income - 87000))
    }
    if (income > 180000) {
      return 54232 + (0.45 * (income - 180000))
    } 
  }


</script>

